
plugins {
    id "com.github.johnrengelman.shadow" version "5.2.0"
}

version '0.1.0'

jar {
    manifest {
        attributes 'Main-Class': 'spiffe.helper.cli.Runner'
    }
}

apply plugin: 'com.github.johnrengelman.shadow'

assemble.dependsOn shadowJar

shadowJar {
    classifier = ""
}

ext {
    grpcVersion = '1.30.0'
}

dependencies {
    api (project(':java-spiffe-core'))
    implementation group: 'commons-cli', name: 'commons-cli', version: '1.4'

    // pull grpc libraries for testing
    testImplementation group: 'io.grpc', name: 'grpc-netty', version: "${grpcVersion}"
    testImplementation group: 'io.grpc', name: 'grpc-protobuf', version: "${grpcVersion}"
    testImplementation group: 'io.grpc', name: 'grpc-stub', version: "${grpcVersion}"
    testImplementation group: 'io.grpc', name: 'grpc-testing', version: "${grpcVersion}"
}
